:root{
  --bg:#fff5f4; --card:#ffffff; --text:#25324d; --muted:#60708f; --border:#e6e8f0;
  --good:#14b85e; --bad:#e53935; --pri1:#ff7a59; --pri2:#ffb74d; --accent:#5ec8ff;
}
*{box-sizing:border-box}
html,body{height:100%}
/* prevent iOS zoom and double-tap zoom */
input,button,select,textarea{font-size:18px;}
html{-webkit-text-size-adjust:100%;}
button{touch-action:manipulation;}

body{margin:0;background:radial-gradient(800px 300px at 50% -5%, #fff0e9, transparent 60%), var(--bg);color:var(--text);font-family:system-ui,Segoe UI,Inter,Roboto,Arial}
.top{display:flex;justify-content:space-between;align-items:center;padding:14px 16px;border-bottom:1px solid var(--border)}
.brand{font-weight:900;font-size:1.2rem}
.pill{padding:4px 10px;border-radius:999px;background:#fff;border:1px solid var(--border);font-weight:800}
.layout{max-width:1100px;margin:16px auto;padding:0 12px;display:grid;grid-template-columns:340px 1fr 1fr;gap:14px}
@media (max-width:1000px){.layout{grid-template-columns:1fr}}
.card{background:var(--card);border:1px solid var(--border);border-radius:16px;padding:14px;box-shadow:0 10px 30px rgba(0,0,0,.06)}
h2{margin:0 0 10px}
.group{margin:10px 0}
.label{font-weight:900;margin-bottom:6px}
.help,.hint,.small{color:var(--muted);font-size:.9rem}
.row{display:flex;gap:10px;align-items:center}
.wrap{flex-wrap:wrap}
.tiles{display:flex;gap:8px;flex-wrap:wrap}
.tile{cursor:pointer;border:2px solid var(--border);border-radius:12px;padding:10px 14px;background:#fff;color:var(--text);font-weight:900}
.tile.active{border-color:var(--pri1);box-shadow:0 0 0 3px rgba(255,122,89,.18)}
.stepper{display:flex;align-items:center;gap:8px}
.stepper .num{width:64px;text-align:center;font-weight:900;font-size:1.2rem;border:2px solid var(--border);border-radius:10px;background:#fff;padding:7px 8px}
.btn{cursor:pointer;border:2px solid var(--border);border-radius:12px;padding:10px 14px;background:#fff;color:var(--text);font-weight:900;transition:.15s transform,.15s filter}
.btn:hover{filter:brightness(1.06)} .btn:active{transform:scale(.98)}
.btn.primary{background:linear-gradient(135deg,var(--pri1),var(--pri2));color:white;border:none}
.btn.danger{background:linear-gradient(135deg,#ff5252,#ff7a7a);color:white;border:none}
.btn.ghost{background:transparent}
.btn.sm{padding:8px 10px}
.chips{display:flex;gap:8px;flex-wrap:wrap}
.chip{cursor:pointer;border:2px dashed var(--border);border-radius:999px;background:#fff;color:var(--text);padding:6px 10px;font-weight:800}
.toggles{display:flex;gap:14px;flex-wrap:wrap}
.actions{display:flex;gap:10px;align-items:center;flex-wrap:wrap;margin-top:6px}
.display{
  display:flex;align-items:center;justify-content:center;min-height:260px;border-radius:16px;
  font-weight:900;font-size:84px;letter-spacing:1px;user-select:none;background:white;border:2px dashed var(--border)
}
@media (max-width:520px){.display{min-height:200px;font-size:60px}}
.dim{opacity:.4}
/* corner last number */
.lastCorner{margin-top:6px;display:inline-flex;gap:8px;align-items:center}
.lastCorner .label{color:var(--muted);font-weight:800;font-size:.9rem}
.bubble.small{padding:4px 8px;border-radius:999px;background:#fff;border:2px solid var(--border);font-weight:800}

.prog{height:10px;border-radius:999px;background:#f1f3f9;border:2px solid var(--border);overflow:hidden;margin-top:8px}
.progFill{height:100%;width:0%;background:linear-gradient(90deg,var(--accent),#9eecff)}
.answer{display:flex;gap:8px;align-items:center;margin-top:8px}
#answer{flex:1;padding:10px;border-radius:10px;border:2px solid var(--border);}
.keypad{display:grid;grid-template-columns:repeat(3,1fr);gap:8px;margin-top:10px}
.keypad button{padding:14px;border-radius:12px;border:2px solid var(--border);background:#fff;color:var(--text);font-size:1.1rem;font-weight:900}
.hist{list-style:none;margin:0;padding:0;max-height:260px;overflow:auto}
.hist li{border-bottom:1px solid var(--border);padding:8px 2px;font-size:.95rem;color:var(--muted)}
.seq{display:flex;gap:8px;flex-wrap:wrap}
.seq .bubble{padding:6px 10px;border-radius:999px;background:#fff;border:2px solid var(--border);font-weight:800}
.spacer{flex:1}
.lang{display:flex;gap:8px}
.lang .chip{border:2px solid var(--border);background:#fff;padding:6px 10px;border-radius:999px;font-weight:800;cursor:pointer}

/* “Get ready” overlay (no numbers) */
.overlay{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.15);backdrop-filter:blur(2px);z-index:999}
.overlay .bubble{width:260px;border-radius:18px;background:#fff;padding:18px;border:2px solid var(--border);text-align:center}
.ready{font-weight:900;font-size:1.4rem;margin-bottom:10px}
.bar{height:12px;border-radius:999px;background:#f1f3f9;border:2px solid var(--border);overflow:hidden}
.fill{height:100%;width:0%;background:linear-gradient(90deg,var(--accent),#9eecff)}
